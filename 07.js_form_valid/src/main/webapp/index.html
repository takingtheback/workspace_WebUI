<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Javascript Form Valid</title>
<!-- css : external -->
<link type="text/css" rel="stylesheet" href="css/common_form.css">
		
<script type="text/javascript">
	window.onload = function() {
		initForm();
	}
	
	/* 폼 초기화 함수 */
	function initForm() {
		// 폼양식 > 입력항목 이름
		// document.joinForm.memberId.focus();
	
		// 폼양식 > 입력항목 id
		document.getElementById("memberId").focus();
	}
	
	/* reset button 이벤트 */
	function clickReset() {
		initForm();
	}
	
	/* 입력양식 데이터 검증 이벤트 
		1. 필수입력항목 : 아이디, 비밀번호, 비밀번호 확인
			=> 입력항목객체.value
	*/
	function checkForm() {
		// 아이디 입력 데이터 가져오기
		var memberId = document.getElementById("memberId").value;
		console.log("memberId : ", memberId.length);
		
		if(memberId == "" || memberId.trim().length == 0) {
			document.getElementById("memberId").focus;
			document.getElementById("memberIdMsg").innerHTML ="아이디를 입력하세요";
			document.getElementById("memberIdMsg").style.color = "red";
			document.getElementById("memberId").value = ""; // 사용자 입력데이터를 공백문자열 초기화
			return false; // input type ="submit"
			
		}
		memberId = memberId.trim();
		console.log("memberId : ", memberId.length);
		
		
		// 비밀번호 입력 데이터 가져오기
		var memberPw = document.joinForm.memberPw.value
		console.log("memberPw : ", memberPw);
		
		if(memberPw == "" || memberPw.trim().length == 0) {
			document.getElementById("memberPw").focus();
			document.getElementById("memberPwMsg").innerHTML ="패스워드를 입력하세요";
			document.getElementById("memberPwMsg").style.color = "red";
			document.getElementById("memberPw").value = "";
			return false; // input type ="submit"
			
		}
		memberPw = memberPw.trim();
		
		// 비밀번호 확인 입력 데이터 가져오기
		var memberPwConfirm = document.getElementById("memberPwConfirm").value;
		console.log("memberPwConfirm : ", memberPwConfirm);

		if(memberPwConfirm == "" || memberPwConfirm.trim().length == 0) {
			document.getElementById("memberPwConfirm").focus();
			document.getElementById("memberPwConfirmMsg").innerHTML ="패스워드를 입력하세요";
			document.getElementById("memberPwConfirmMsg").style.color = "red";
			document.getElementById("memberPwConfirm").value = "";
			return false; // input type ="submit"
			
		} 
		memberPwConfirm = memberPwConfirm.trim();
		
		
		// 비밀번호와 비밀번호 확인 매칭 검증
		if(memberPw != memberPwConfirm) {
			document.getElementById("memberPw").focus();
			document.getElementById("memberPwMsg").innerHTML ="패스워드가 일치하지 않습니다.";
			document.getElementById("memberPwMsg").style.color = "red";
			document.getElementById("memberPw").value = "";
			document.getElementById("memberPwConfirm").value = "";
			return false; // input type ="submit"
		}
	}
		
		/* 비밀번호 표시 : 보이기 / 감추기 이벤트 
			1. 비밀번호 표시 체크박스 객체 가져오기
			2. 비밀번호 객체 가져오기
			3. 비밀번호 확인 객체 가져오기
			4. 체크박스 체킹(checked == true)
				=> type='text'
			5. 체크박스 해제(checked == false)
		*/ 
		function viewMemberPw() {
		var viewElement = document.getElementById("btnViewMemberPw");
		var memberPwElement = document.getElementById("memberPw");
		var memberPwConfirmElement = document.getElementById("memberPwConfirm");
			
			if(viewElement.checked) {
				memberPwElement.type ="text";	
				memberPwConfirmElement.type ="text";	
				
			} else {
				memberPwElement.type ="password";	
				memberPwConfirmElement.type ="password";
			}
		}
		
		
		/* 이메일 
			1. 이메일 항목 전부 입력시 뒷부분 필요없음
			2. 이메일 뒷부분 선택시
			3. 앞에 @ ~ 자르고 뒷부분 선택
			4. 선택한 구문 집어넣기
		*/	
		function changeEmail() {
			var emailChangerElement = document.getElementById("emailChanger");	
			var email2Element = document.getElementById("input_email2");

			email2Element.value = emailChangerElement.value;
		}
		
		
		/* 관심분야 checkbox 전체 선택
			1. 관심분야 checkbox 객체 가져오기 : NodeList
			2. checkbox item 갯수만큼 반복
			3. checked 되어 있지 않으면 클릭체크(click())
		*/
		function checkAll() {
			var interestElement = document.joinForm.interest;
			
			for (index = 0; index < interestElement.length; index++) {
				if(!interestElement[index].checked) {
					interestElement[index].click();
				}
				
			}
		}
		
		/* 관심분야 checkbox 전체 선택 
			1. 관심분야 checkbox 객체 가져오기 : NodeList
			2. checkbox item 갯수만큼 반복
			3. checked 되어 있지 않으면 클릭체크(click()) 체크 해제
		*/
		function clearAll() {
			var interestElement = document.joinForm.interest;
			
			for (index = 0; index < interestElement.length; index++) {
				if(interestElement[index].checked) {
					interestElement[index].click();
				}
				
			}
		}
		
		/* 자기소개 textarea 입력 길이 출력*/
		function introLengthCheck(takeData) {
			var introLengthElement = document.getElementById("introLength");
			introLengthElement.innerHTML = takeData.length;
		}
		
		
		/* 아이디 중복확인 새창열기*/ 
		function openIdCheckWindow() {
			var specs = "width= 400, height=300, top=200, left=300";
			var idWin = window.open("duplicateMemberId.html","_blank", specs);
		}
		
		// 이 부분을 추가하면 action 으로 이동하지 않아서 console 확인 가능	
		// return false;
		
	
</script>		
</head>

<body>
<div class="input_location">	
<h3>JavaScript Form Valid</h3>
</div>
<!--  
	## form 입력양식
		-- 아이디 : 텍스트
		-- 비밀번호 / 비밀번호 확인 : 비밀번호
		-- 비밀번호 표시 : 체크박스
		-- 이메일 : 이메일아이디/ 도메인주소/ 도메인선택
		-- 관심분야 : 체크박스(항목 5개)
		-- 자기소개 : textarea
		
		-- 확인전용버튼 : submit
		-- 취소전용버튼 : reset
 -->
 
 <form action="result.html" method="post" name="joinForm" id="joinForm">
	<!-- 아이디 -->
	<div class="input_location">	
	<input type="text" name="memberId" id="memberId" maxlength="15"
	placeholder="아이디" class="input_box">
	<input type="button" value ="아이디중복체크" onclick="openIdCheckWindow()">
	<span id="memberIdMsg"></span>
	</div>
	
	<!-- 비밀번호 -->
	<div class="input_location">
	<input type="password" name="memberPw" id="memberPw" placeholder="비밀번호" class="input_box">
	<span id="memberPwMsg"></span>
	</div>
	
	<!-- 비밀번호 확인 -->
	<div class="input_location">
	<input type="password" name="memberPwConfirm" id="memberPwConfirm"
	placeholder="비밀번호 확인" class="input_box">
	<span id="memberPwConfirmMsg"></span>
	
	<!-- 비밀번호 보이기 -->
	<input type="checkbox" id= "btnViewMemberPw" onclick="viewMemberPw()"> 비밀번호 보이기
	
	</div>
	

	<!-- 이메일 -->
	<div class="input_location">
	<input type="text" name="email1" id="input_email1"
	placeholder="이메일" class="input_email1" >
	<span id="input_email1Msg"></span>
	<input type="text" readOnly="readOnly" name="email2" id="input_email2"
	placeholder="도메인주소" class="input_email2" >
	
	<select name="emailChanger" id="emailChanger" onchange = "changeEmail()">
    <option value="none">직접입력</option>
    <option value="@naver.com" id="naver">naver</option>
    <option value="@gmail.com" id="gmail">gmail</option>
	</select>
	</div>
	<div class="input_location">
	관심분야<br>
	<input type="checkbox" name="interest" value="1"> JAVA
	<input type="checkbox" name="interest" value="2"> SQL
	<input type="checkbox" name="interest" value="3"> HTML
	<input type="checkbox" name="interest" value="4"> CSS
	<input type="checkbox" name="interest" value="5"> SPRING
	</div>
	<div>
	<input type="button" value ="전체선택" onclick="checkAll()">
	<input type="button" value ="전체해제" onclick="clearAll()">
	</div>
	<div class="input_location">
	자기소개(200자이내입력)
	<div id="introLength"> 0 </div>
	</div>
	<input type="text" name="memberId" id="intro" onkeyup ="introLengthCheck(this.value)">
	
	<div class="input_location">
	<input type="submit" value="확인" class="btn_submit" onclick="return checkForm();">
	</div>
	<div class="input_location">
	<input type="reset" value="취소" class="reset" onclick="clickReset()">
	</div>
	
</form>
</body>
</html>